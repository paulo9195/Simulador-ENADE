<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENADE-Psi 2025 ‚Äî Simulador com API Gemini</title>
    <style>
        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --accent-color: #06b6d4;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --border-color: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            background: var(--bg-primary);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            min-height: 600px;
            margin-bottom: 100px;
        }
        
        /* Estilos para Sele√ß√£o de Prova e Hist√≥rico */
        .exam-selection, .history-container {
            padding: 40px;
            text-align: center;
        }

        .exam-selection h2, .history-container h2 {
            font-size: 2rem;
            margin-bottom: 30px;
            color: var(--text-primary);
        }

        .exam-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .exam-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-align: left;
        }

        .exam-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .exam-card.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .exam-card h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        .exam-card p {
            font-size: 0.95rem;
            opacity: 0.8;
        }

        .start-button {
            background: linear-gradient(135deg, var(--success-color), var(--accent-color));
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            opacity: 0.5;
            pointer-events: none;
        }

        .start-button.active {
            opacity: 1;
            pointer-events: auto;
        }

        .start-button:hover.active {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .api-key-section {
            margin-top: 40px;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: 15px;
            border: 1px solid var(--border-color);
        }
        
        .api-key-section input {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-right: 10px;
            width: 60%;
        }

        .api-key-section button {
            padding: 10px 15px;
        }
        
        /* Estilos do Quiz */
        .quiz-container {
            display: none;
            padding: 40px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .quiz-info {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .timer {
            background: var(--error-color);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .progress-bar {
            background: var(--border-color);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            height: 100%;
            transition: width 0.3s ease;
        }

        .question-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .question-number {
            background: var(--primary-color);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
        }

        .question-type {
            background: var(--accent-color);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 25px;
            color: var(--text-primary);
        }

        .question-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .ai-hint-button {
            background: linear-gradient(135deg, var(--warning-color), #f97316);
            color: white;
            border: none;
            padding: 8px 15px;
            font-size: 0.9rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: auto;
        }

        .ai-hint-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .ai-hint-box {
            background: #fffbe6;
            border: 1px solid #fde68a;
            border-left: 5px solid var(--warning-color);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            font-size: 0.95rem;
            color: var(--text-secondary);
            text-align: left;
        }

        .options-container {
            display: grid;
            gap: 15px;
        }

        .option {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            text-align: left;
        }

        .option:hover {
            border-color: var(--primary-color);
            background: #f0f9ff;
        }

        .option.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, #dbeafe, #e0e7ff);
        }

        .option-letter {
            background: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .option.selected .option-letter {
            background: var(--success-color);
        }

        .essay-textarea {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
        }

        .essay-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .nav-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
        }

        .finish-button {
            background: linear-gradient(135deg, var(--success-color), var(--accent-color));
            font-weight: bold;
            padding: 15px 30px;
        }
        
        /* Estilos de Resultados e Hist√≥rico */
        .results-container {
            display: none;
            padding: 40px;
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-header h2 {
            font-size: 2.5rem;
            color: var(--success-color);
            margin-bottom: 10px;
        }

        .loading-message {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        .spinner {
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results-content {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .score-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .score-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .score-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .score-label {
            color: var(--text-secondary);
            margin-top: 5px;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
        }
        
        .history-table th, .history-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .history-table th {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .action-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .action-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .download-button {
            background: linear-gradient(135deg, var(--warning-color), #f97316);
        }

        .history-button, .notebooklm-button {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .quiz-header, .quiz-info, .navigation, .action-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .exam-grid {
                grid-template-columns: 1fr;
            }

            .action-button {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .question-text strong {
            color: var(--primary-color);
        }

        .question-text br {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† ENADE-Psi 2025</h1>
            <p>Simulador com API Gemini 2.0 Flash ‚Äî An√°lise Real de IA</p>
        </div>

        <div class="main-content">
            <!-- Sele√ß√£o de Prova -->
            <div id="examSelection" class="exam-selection">
                <h2>Escolha sua Prova</h2>
                <p style="margin-bottom: 30px; color: var(--text-secondary);">
                    Quest√µes reais do ENADE com an√°lise por IA do Gemini 2.0 Flash
                </p>
                
                <div class="exam-grid">
                    <div class="exam-card" data-exam="formacao_geral">
                        <h3>üìö Forma√ß√£o Geral</h3>
                        <p>Quest√µes de conhecimentos gerais, direitos humanos, realidade brasileira e mundial e temas contempor√¢neos.</p>
                    </div>
                    
                    <div class="exam-card" data-exam="componente_especifico">
                        <h3>üß† Componente Espec√≠fico</h3>
                        <p>Quest√µes focadas nas grandes √°reas da Psicologia: teorias, m√©todos, psicopatologia e avalia√ß√£o.</p>
                    </div>
                    
                    <div class="exam-card" data-exam="pratica_profissional">
                        <h3>üíº Pr√°tica Profissional</h3>
                        <p>Estudos de caso e situa√ß√µes-problema sobre atua√ß√£o em sa√∫de, educa√ß√£o, organiza√ß√µes e √©tica profissional.</p>
                    </div>
                    
                    <div class="exam-card" data-exam="prova_completa">
                        <h3>üéØ Prova Completa</h3>
                        <p>Simulado completo com quest√µes de forma√ß√£o geral, componente espec√≠fico e pr√°tica profissional.</p>
                    </div>
                </div>

                <button id="startButton" class="start-button">Iniciar Simulado</button>
                <button id="historyButton" class="action-button history-button">üìä Ver Hist√≥rico</button>

                <div class="api-key-section">
                    <h4>Configurar Chave da API Gemini</h4>
                    <input type="password" id="apiKeyInput" placeholder="Cole sua chave da API aqui">
                    <button id="saveApiKeyButton" class="action-button">Salvar</button>
                </div>
            </div>

            <!-- Container do Quiz -->
            <div id="quizContainer" class="quiz-container">
                <div class="quiz-header">
                    <div class="quiz-info">
                        <h2 id="examTitle">Prova ENADE-Psi</h2>
                        <div id="timer" class="timer">40:00</div>
                    </div>
                    <div id="questionCounter">Quest√£o 1 de 18</div>
                </div>

                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 5.5%"></div>
                </div>

                <div id="questionContainer" class="question-container">
                    <!-- Quest√£o ser√° inserida aqui dinamicamente -->
                </div>

                <div class="navigation">
                    <button id="prevButton" class="nav-button" disabled>‚¨ÖÔ∏è Anterior</button>
                    <button id="nextButton" class="nav-button">Pr√≥ximo ‚û°Ô∏è</button>
                    <button id="finishButton" class="nav-button finish-button" style="display: none;">üèÅ Finalizar</button>
                </div>
            </div>

            <!-- Container de Resultados -->
            <div id="resultsContainer" class="results-container">
                <div class="results-header">
                    <h2>üìä Resultados do Simulado</h2>
                    <p>An√°lise detalhada com Gemini 2.0 Flash</p>
                </div>

                <div id="loadingMessage" class="loading-message">
                    <div class="spinner"></div>
                    <p>Analisando suas respostas com Gemini 2.0 Flash...</p>
                    <p style="font-size: 0.9rem; margin-top: 10px;">Isso pode levar alguns segundos.</p>
                </div>

                <div id="resultsContent" class="results-content" style="display: none;">
                    <!-- Resultados ser√£o inseridos aqui -->
                </div>

                <div class="action-buttons">
                    <a href="https://notebooklm.google.com/" target="_blank" id="notebooklmButton" class="action-button notebooklm-button">üöÄ Ir para NotebookLM Especialista</a>
                    <button id="downloadButton" class="action-button download-button">üìÑ Baixar PDF</button>
                    <button id="newExamButton" class="action-button">üîÑ Nova Prova</button>
                    <button id="backToHomeButton" class="action-button">üè† Voltar ao In√≠cio</button>
                </div>
            </div>
            
            <!-- Container do Hist√≥rico -->
            <div id="historyContainer" class="history-container" style="display: none;">
                <h2>Hist√≥rico de Desempenho</h2>
                <div id="historyContent">
                    <!-- Tabela de hist√≥rico ser√° inserida aqui -->
                </div>
                <div class="action-buttons">
                    <button id="backToHomeFromHistory" class="action-button">üè† Voltar ao In√≠cio</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURA√á√ÉO DA API E CHAVE ---
        
        // Fun√ß√£o para atualizar a chave da API no localStorage
        function updateAPIKey(newKey) {
            if (newKey && newKey.trim() !== "") {
                localStorage.setItem("GEMINI_API_KEY", newKey);
                alert("Chave da API atualizada com sucesso!");
                return newKey;
            }
            return null;
        }

        // Carrega a chave do localStorage ou usa uma chave padr√£o de placeholder
        let GEMINI_API_KEY = localStorage.getItem("GEMINI_API_KEY") || "COLE_SUA_CHAVE_AQUI";
        const GEMINI_API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent";

        // --- BANCO DE QUEST√ïES ---
        const examData = {
            formacao_geral: {
                title: "Forma√ß√£o Geral",
                timeLimit: 60,
                questions: [
                    // DISCURSIVAS
                    { id: "FG_D1", type: "discursiva", text: `<strong>TEXTO 1</strong><br>O Relat√≥rio Mundial sobre Desigualdade de G√™nero 2023 do F√≥rum Econ√¥mico Mundial aponta que, no ritmo atual, ser√£o necess√°rios 131 anos para atingir a paridade total de g√™nero. <strong>TEXTO 2</strong><br>No Brasil, a Lei Maria da Penha (Lei n¬∫ 11.340/2006) √© um marco na luta contra a viol√™ncia dom√©stica e familiar, mas os √≠ndices de feminic√≠dio permanecem alarmantes.<br><br>Com base nos textos e em seus conhecimentos, redija um texto dissertativo sobre a persist√™ncia da desigualdade de g√™nero na sociedade brasileira, abordando: a) a rela√ß√£o entre desigualdade estrutural e viol√™ncia contra a mulher; b) o papel da educa√ß√£o na desconstru√ß√£o de estere√≥tipos de g√™nero.` },
                    { id: "FG_D2", type: "discursiva", text: `A dissemina√ß√£o de not√≠cias falsas (fake news) tornou-se um dos maiores desafios para as democracias contempor√¢neas, influenciando processos eleitorais e a sa√∫de p√∫blica. Analise o fen√¥meno das fake news, considerando: a) os mecanismos psicossociais que contribuem para sua propaga√ß√£o (vi√©s de confirma√ß√£o, bolhas informacionais); b) as consequ√™ncias para o debate p√∫blico e a confian√ßa nas institui√ß√µes.` },
                    { id: "FG_D3", type: "discursiva", text: `O Brasil possui uma das maiores biodiversidades do planeta, mas enfrenta graves desafios ambientais, como o desmatamento na Amaz√¥nia e a crise h√≠drica. Discorra sobre a import√¢ncia do desenvolvimento sustent√°vel, explicando: a) o conceito de sustentabilidade, articulando as dimens√µes ambiental, social e econ√¥mica; b) duas a√ß√µes que podem ser adotadas pelo governo ou pela sociedade civil para promover a conserva√ß√£o ambiental.` },
                    // M√öLTIPLA ESCOLHA
                    { id: "FG_M1", type: "multipla_escolha", text: `A Declara√ß√£o Universal dos Direitos Humanos (1948) estabelece que "todos os seres humanos nascem livres e iguais em dignidade e em direitos". No contexto brasileiro, qual dos seguintes desafios representa uma viola√ß√£o direta desse princ√≠pio?`, options: ["A alta carga tribut√°ria sobre produtos de consumo.", "A desigualdade racial e social, que limita o acesso a oportunidades.", "A burocracia para a abertura de novas empresas.", "A polariza√ß√£o pol√≠tica nas redes sociais.", "A complexidade do sistema eleitoral."], correct: 1 },
                    { id: "FG_M2", type: "multipla_escolha", text: `O conceito de "Ind√∫stria 4.0" refere-se √† quarta revolu√ß√£o industrial, caracterizada pela integra√ß√£o de tecnologias digitais, f√≠sicas e biol√≥gicas. Qual das seguintes op√ß√µes √© uma consequ√™ncia social direta dessa revolu√ß√£o?`, options: ["O aumento da produ√ß√£o agr√≠cola familiar.", "A valoriza√ß√£o de profiss√µes exclusivamente manuais.", "A necessidade de requalifica√ß√£o profissional e o surgimento de novas profiss√µes.", "A diminui√ß√£o do uso da internet e das redes sociais.", "O fim da automa√ß√£o nas f√°bricas."], correct: 2 },
                    { id: "FG_M3", type: "multipla_escolha", text: `A Constitui√ß√£o Federal de 1988 √© conhecida como "Constitui√ß√£o Cidad√£" por ampliar direitos e garantias fundamentais. A cria√ß√£o do Sistema √önico de Sa√∫de (SUS), baseada nos princ√≠pios de universalidade, integralidade e equidade, √© um exemplo de direito social garantido por ela. O princ√≠pio da equidade no SUS visa:`, options: ["Oferecer o mesmo tipo de tratamento para todas as pessoas, independentemente da necessidade.", "Priorizar o atendimento em hospitais privados.", "Diminuir as desigualdades, investindo mais onde a car√™ncia √© maior.", "Limitar o acesso de estrangeiros aos servi√ßos de sa√∫de.", "Cobrar pelos servi√ßos de acordo com a renda do paciente."], correct: 2 },
                    { id: "FG_M4", type: "multipla_escolha", text: `As discuss√µes sobre diversidade e inclus√£o t√™m ganhado destaque na sociedade e nas organiza√ß√µes. Uma pol√≠tica de inclus√£o eficaz deve ir al√©m da simples contrata√ß√£o de pessoas de grupos minorizados, devendo promover:`, options: ["A cria√ß√£o de metas de diversidade sem alterar a cultura da empresa.", "Um ambiente de trabalho que valorize as diferen√ßas e garanta equidade de oportunidades.", "A separa√ß√£o de equipes por afinidade para evitar conflitos.", "A padroniza√ß√£o de comportamentos para fortalecer a identidade corporativa.", "O foco exclusivo em compet√™ncias t√©cnicas, ignorando as habilidades socioemocionais."], correct: 1 },
                    { id: "FG_M5", type: "multipla_escolha", text: `O Antropoceno √© um termo proposto para descrever a √©poca geol√≥gica atual, na qual as atividades humanas se tornaram a principal for√ßa de transforma√ß√£o planet√°ria. Qual dos fen√¥menos abaixo √© a evid√™ncia mais marcante do Antropoceno?`, options: ["As varia√ß√µes naturais do campo magn√©tico da Terra.", "Os ciclos de eras glaciais e interglaciais.", "A movimenta√ß√£o das placas tect√¥nicas.", "As mudan√ßas clim√°ticas globais aceleradas pela emiss√£o de gases de efeito estufa.", "A ocorr√™ncia de eclipses solares e lunares."], correct: 3 },
                    { id: "FG_M6", type: "multipla_escolha", text: `O Estatuto da Crian√ßa e do Adolescente (ECA) preconiza a doutrina da prote√ß√£o integral. Isso significa que crian√ßas e adolescentes s√£o:`, options: ["Propriedade dos pais, que t√™m poder absoluto sobre eles.", "Incapazes de opinar sobre suas pr√≥prias vidas.", "Sujeitos de direitos com prioridade absoluta na formula√ß√£o de pol√≠ticas p√∫blicas.", "Adultos em miniatura, com as mesmas responsabilidades.", "Um problema exclusivo do sistema de seguran√ßa p√∫blica."], correct: 2 },
                    { id: "FG_M7", type: "multipla_escolha", text: `A globaliza√ß√£o √© um processo de intensifica√ß√£o das trocas econ√¥micas, pol√≠ticas e culturais entre os pa√≠ses. Uma de suas consequ√™ncias culturais √©:`, options: ["O isolamento completo das culturas locais.", "A homogeneiza√ß√£o cultural, com a difus√£o de padr√µes de consumo globais.", "O desaparecimento das l√≠nguas e dialetos locais.", "A proibi√ß√£o de manifesta√ß√µes culturais tradicionais.", "A redu√ß√£o do acesso √† informa√ß√£o internacional."], correct: 1 },
                    { id: "FG_M8", type: "multipla_escolha", text: `O conceito de "lugar de fala" se popularizou nos debates sociais contempor√¢neos. Ele se refere √† ideia de que:`, options: ["Apenas pessoas de um determinado grupo podem falar sobre suas experi√™ncias.", "A posi√ß√£o social de um indiv√≠duo influencia sua perspectiva e a legitimidade de seu discurso sobre certos temas.", "Todas as opini√µes t√™m o mesmo valor, independentemente da experi√™ncia de quem fala.", "O debate deve ser restrito a especialistas acad√™micos.", "A liberdade de express√£o √© absoluta e n√£o pode ser questionada."], correct: 1 },
                    { id: "FG_M9", type: "multipla_escolha", text: `A Lei Geral de Prote√ß√£o de Dados (LGPD) no Brasil tem como objetivo principal:`, options: ["Aumentar a coleta de dados pessoais pelas empresas.", "Proteger os direitos fundamentais de liberdade e de privacidade dos cidad√£os.", "Facilitar a venda de bancos de dados pessoais sem consentimento.", "Restringir o acesso dos cidad√£os √†s suas pr√≥prias informa√ß√µes.", "Permitir que o governo monitore todas as comunica√ß√µes online."], correct: 1 },
                    { id: "FG_M10", type: "multipla_escolha", text: `O envelhecimento da popula√ß√£o √© uma tend√™ncia demogr√°fica no Brasil e no mundo. Qual √© uma implica√ß√£o direta desse fen√¥meno para as pol√≠ticas p√∫blicas?`, options: ["A necessidade de reduzir os investimentos em educa√ß√£o infantil.", "A diminui√ß√£o da demanda por servi√ßos de sa√∫de.", "A necessidade de reformar os sistemas de previd√™ncia e ampliar os cuidados com a sa√∫de do idoso.", "A queda nos pre√ßos de im√≥veis em √°reas urbanas.", "O aumento da taxa de natalidade para compensar."], correct: 2 },
                    { id: "FG_M11", type: "multipla_escolha", text: `A Economia Criativa √© um setor baseado no capital intelectual e cultural e na criatividade. Qual das seguintes atividades √© um exemplo de Economia Criativa?`, options: ["Extra√ß√£o de min√©rio de ferro.", "Produ√ß√£o de soja em larga escala.", "Desenvolvimento de software e games.", "Fabrica√ß√£o de autom√≥veis.", "Constru√ß√£o civil."], correct: 2 },
                    { id: "FG_M12", type: "multipla_escolha", text: `O conceito de interseccionalidade, proposto por Kimberl√© Crenshaw, √© fundamental para entender as desigualdades sociais. Ele sugere que:`, options: ["As diferentes formas de opress√£o (como racismo, sexismo, classismo) s√£o independentes e devem ser analisadas separadamente.", "Cada indiv√≠duo pertence a apenas um grupo social, que define sua identidade.", "As opress√µes se sobrep√µem e se cruzam, criando experi√™ncias √∫nicas de discrimina√ß√£o.", "A classe social √© o √∫nico fator determinante da desigualdade.", "A opress√£o de g√™nero √© a mais importante e deve ser priorizada."], correct: 2 },
                    { id: "FG_M13", type: "multipla_escolha", text: `A Agenda 2030 da ONU estabelece os Objetivos de Desenvolvimento Sustent√°vel (ODS), um apelo universal √† a√ß√£o para acabar com a pobreza, proteger o planeta e garantir que todas as pessoas desfrutem de paz e prosperidade. Um dos ODS √© "Educa√ß√£o de Qualidade". Isso implica:`, options: ["Garantir que todas as crian√ßas completem o ensino prim√°rio.", "Assegurar uma educa√ß√£o inclusiva, equitativa e de qualidade, e promover oportunidades de aprendizagem ao longo da vida para todos.", "Focar exclusivamente no ensino de ci√™ncias e matem√°tica.", "Privatizar todo o sistema educacional para aumentar a efici√™ncia.", "Reduzir o sal√°rio dos professores para cortar custos."], correct: 1 },
                    { id: "FG_M14", type: "multipla_escolha", text: `A mobilidade urbana √© um grande desafio nas metr√≥poles brasileiras. Uma solu√ß√£o sustent√°vel para esse problema envolve:`, options: ["Incentivar o uso de transporte individual motorizado com mais viadutos e t√∫neis.", "Priorizar o transporte p√∫blico de qualidade, ciclovias e a mobilidade de pedestres.", "Aumentar o pre√ßo dos combust√≠veis sem oferecer alternativas.", "Restringir a circula√ß√£o de pessoas no centro da cidade.", "Construir mais vagas de estacionamento em √°reas centrais."], correct: 1 },
                    { id: "FG_M15", type: "multipla_escolha", text: `O que caracteriza um Estado Democr√°tico de Direito?`, options: ["O poder concentrado em um √∫nico l√≠der que decide pelo bem do povo.", "A soberania popular, o imp√©rio da lei e o respeito aos direitos fundamentais.", "A aus√™ncia de leis e a liberdade total dos indiv√≠duos.", "A submiss√£o do poder judici√°rio ao poder executivo.", "A realiza√ß√£o de elei√ß√µes peri√≥dicas, mesmo sem garantias de liberdade."], correct: 1 },
                ]
            },
            componente_especifico: {
                title: "Componente Espec√≠fico",
                timeLimit: 60,
                questions: [
                    // DISCURSIVAS
                    { id: "CE_D1", type: "discursiva", text: `Um paciente de 35 anos busca terapia com queixas de ansiedade social intensa e pensamentos recorrentes de que ser√° julgado negativamente. Ele evita apresenta√ß√µes no trabalho e encontros sociais. Descreva como a Terapia Cognitivo-Comportamental (TCC) abordaria este caso, explicando: a) o modelo cognitivo do transtorno; b) duas t√©cnicas que poderiam ser utilizadas na interven√ß√£o.` },
                    { id: "CE_D2", type: "discursiva", text: `Diferencie, do ponto de vista da psicopatologia psicanal√≠tica, as estruturas cl√≠nicas da neurose e da psicose. Aborde: a) a rela√ß√£o do sujeito com a realidade em cada estrutura; b) o principal mecanismo de defesa associado a cada uma (recalque para a neurose, foraclus√£o para a psicose).` },
                    { id: "CE_D3", type: "discursiva", text: `O processo de Avalia√ß√£o Psicol√≥gica √© um procedimento complexo que vai al√©m da simples aplica√ß√£o de testes. Descreva as etapas de um processo de avalia√ß√£o psicol√≥gica, desde a demanda inicial at√© a devolutiva, e explique a import√¢ncia do uso de m√∫ltiplas fontes de informa√ß√£o (entrevistas, observa√ß√µes, testes) para a elabora√ß√£o de um psicodiagn√≥stico.` },
                    // M√öLTIPLA ESCOLHA
                    { id: "CE_M1", type: "multipla_escolha", text: `No Behaviorismo Radical de B.F. Skinner, o comportamento √© modelado por suas consequ√™ncias. Um comportamento que √© fortalecido pela remo√ß√£o de um est√≠mulo aversivo √© um exemplo de:`, options: ["Refor√ßo positivo.", "Puni√ß√£o positiva.", "Puni√ß√£o negativa.", "Refor√ßo negativo.", "Extin√ß√£o."], correct: 3 },
                    { id: "CE_M2", type: "multipla_escolha", text: `Segundo a teoria do desenvolvimento de Jean Piaget, a capacidade de pensar de forma abstrata e hipot√©tico-dedutiva, raciocinando sobre possibilidades e n√£o apenas sobre a realidade concreta, √© caracter√≠stica do est√°gio:`, options: ["Sens√≥rio-motor.", "Pr√©-operat√≥rio.", "Operat√≥rio concreto.", "Operat√≥rio formal.", "P√≥s-formal."], correct: 3 },
                    { id: "CE_M3", type: "multipla_escolha", text: `A validade de um teste psicol√≥gico refere-se:`, options: ["√Ä consist√™ncia ou estabilidade dos seus resultados ao longo do tempo.", "√Ä padroniza√ß√£o de sua aplica√ß√£o e corre√ß√£o.", "Ao grau em que o teste mede efetivamente o construto que se prop√µe a medir.", "√Ä exist√™ncia de normas para comparar o resultado do indiv√≠duo com um grupo de refer√™ncia.", "√Ä facilidade de aplica√ß√£o do instrumento pelo psic√≥logo."], correct: 2 },
                    { id: "CE_M4", type: "multipla_escolha", text: `Na teoria de Carl Rogers, tr√™s condi√ß√µes s√£o consideradas necess√°rias e suficientes para a mudan√ßa terap√™utica: empatia, congru√™ncia e aceita√ß√£o positiva incondicional. A congru√™ncia do terapeuta refere-se a:`, options: ["Ser aut√™ntico, genu√≠no e integrado na rela√ß√£o com o cliente.", "Compreender o mundo interno do cliente como se fosse o seu pr√≥prio.", "Aceitar o cliente sem julgamento, independentemente do que ele diga ou fa√ßa.", "Interpretar os sonhos e atos falhos do cliente.", "Utilizar t√©cnicas de dessensibiliza√ß√£o sistem√°tica."], correct: 0 },
                    { id: "CE_M5", type: "multipla_escolha", text: `De acordo com a teoria sociocultural de Vygotsky, a aprendizagem e o desenvolvimento cognitivo s√£o fundamentalmente processos sociais. O conceito que descreve a dist√¢ncia entre o que a crian√ßa consegue fazer sozinha e o que ela consegue fazer com a ajuda de algu√©m mais experiente √© a:`, options: ["Acomoda√ß√£o.", "Zona de Desenvolvimento Proximal (ZDP).", "Equilibra√ß√£o.", "Assimila√ß√£o.", "Matura√ß√£o biol√≥gica."], correct: 1 },
                    { id: "CE_M6", type: "multipla_escolha", text: `Qual das seguintes abordagens te√≥ricas em psicologia social enfatiza o estudo de como as pessoas percebem, pensam e lembram de informa√ß√µes sobre os outros?`, options: ["Behaviorismo Social.", "Psican√°lise.", "Psicologia Humanista.", "Cogni√ß√£o Social.", "An√°lise Institucional."], correct: 3 },
                    { id: "CE_M7", type: "multipla_escolha", text: `O DSM-5 (Manual Diagn√≥stico e Estat√≠stico de Transtornos Mentais) √© uma ferramenta importante na psicopatologia. Sua abordagem √© primariamente:`, options: ["Etiol√≥gica, focada nas causas dos transtornos.", "Psicanal√≠tica, baseada nas estruturas cl√≠nicas.", "Descritiva e categorial, baseada na observa√ß√£o de sinais e sintomas.", "Fenomenol√≥gica, focada na experi√™ncia vivida pelo sujeito.", "Sist√™mica, focada nas rela√ß√µes familiares."], correct: 2 },
                    { id: "CE_M8", type: "multipla_escolha", text: `No contexto da psicologia organizacional, o fen√¥meno do 'groupthink' (pensamento de grupo) √© um risco para a tomada de decis√£o. Ele se caracteriza por:`, options: ["Um processo de debate aberto e cr√≠tico que leva √† melhor solu√ß√£o.", "A busca por unanimidade e coes√£o que suprime a avalia√ß√£o cr√≠tica de alternativas.", "A fragmenta√ß√£o do grupo em subgrupos rivais.", "A dificuldade do grupo em chegar a qualquer decis√£o.", "A influ√™ncia excessiva de um especialista externo ao grupo."], correct: 1 },
                    { id: "CE_M9", type: "multipla_escolha", text: `A Teoria do Apego, desenvolvida por John Bowlby, postula que o v√≠nculo inicial entre a crian√ßa e seu cuidador √© fundamental para o desenvolvimento socioemocional. Um apego seguro √© caracterizado por:`, options: ["Ansiedade e ang√∫stia da crian√ßa quando o cuidador se afasta, e raiva ou indiferen√ßa quando ele retorna.", "A crian√ßa explora o ambiente com confian√ßa na presen√ßa do cuidador e busca conforto nele quando se sente amea√ßada.", "A crian√ßa mostra pouca ou nenhuma prefer√™ncia entre o cuidador e um estranho.", "A crian√ßa evita o contato com o cuidador, mostrando-se autossuficiente.", "Depend√™ncia excessiva do cuidador, com recusa a explorar qualquer ambiente."], correct: 1 },
                    { id: "CE_M10", type: "multipla_escolha", text: `Qual das seguintes op√ß√µes descreve corretamente um princ√≠pio da Gestalt-Terapia?`, options: ["A an√°lise da transfer√™ncia e contratransfer√™ncia como foco central.", "O uso da associa√ß√£o livre para acessar o inconsciente.", "A √™nfase no aqui-e-agora e na tomada de consci√™ncia (awareness).", "A reestrutura√ß√£o de cren√ßas irracionais e pensamentos autom√°ticos.", "O condicionamento de novas respostas a est√≠mulos ansiog√™nicos."], correct: 2 },
                    { id: "CE_M11", type: "multipla_escolha", text: `A precis√£o, tamb√©m chamada de fidedignidade, √© um crit√©rio psicom√©trico fundamental de um teste. Ela se refere:`, options: ["√Ä capacidade do teste de prever um desempenho futuro.", "√Ä consist√™ncia dos escores obtidos pela mesma pessoa quando retestada com o mesmo teste ou com uma forma equivalente.", "√Ä representatividade dos itens do teste em rela√ß√£o ao construto que se quer medir.", "Ao grau em que o teste mede o que se prop√µe a medir.", "√Ä objetividade na corre√ß√£o dos itens do teste."], correct: 1 },
                    { id: "CE_M12", type: "multipla_escolha", text: `Na psican√°lise, o complexo de √âdipo √© um conceito central para o desenvolvimento psicossexual. Sua resolu√ß√£o bem-sucedida implica:`, options: ["A manuten√ß√£o do desejo incestuoso pelo progenitor do sexo oposto.", "A identifica√ß√£o com o progenitor do mesmo sexo e a internaliza√ß√£o das normas parentais.", "A rejei√ß√£o de ambos os pais e a busca por autonomia precoce.", "A fixa√ß√£o na fase oral do desenvolvimento.", "A nega√ß√£o completa da sexualidade infantil."], correct: 1 },
                    { id: "CE_M13", type: "multipla_escolha", text: `O estudo da mem√≥ria na psicologia cognitiva distingue diferentes sistemas. A mem√≥ria que se refere a fatos e conhecimentos gerais sobre o mundo (ex: saber que Paris √© a capital da Fran√ßa) √© chamada de:`, options: ["Mem√≥ria epis√≥dica.", "Mem√≥ria sem√¢ntica.", "Mem√≥ria de procedimento.", "Mem√≥ria de trabalho.", "Mem√≥ria sensorial."], correct: 1 },
                    { id: "CE_M14", type: "multipla_escolha", text: `A abordagem sist√™mica em terapia familiar entende o sintoma de um indiv√≠duo como:`, options: ["Uma express√£o de um conflito puramente intraps√≠quico.", "Um comportamento aprendido que deve ser extinto.", "A manifesta√ß√£o de uma disfun√ß√£o no sistema familiar como um todo.", "Uma distor√ß√£o cognitiva que precisa ser reestruturada.", "Um problema gen√©tico ou biol√≥gico isolado."], correct: 2 },
                    { id: "CE_M15", type: "multipla_escolha", text: `Qual dos seguintes processos √© um exemplo de condicionamento cl√°ssico (pavloviano)?`, options: ["Um rato aprende a pressionar uma barra para receber comida.", "Uma crian√ßa √© elogiada por arrumar o quarto e passa a faz√™-lo com mais frequ√™ncia.", "Um c√£o come√ßa a salivar ao som de uma sineta que foi previamente associada √† apresenta√ß√£o de comida.", "Um motorista perde pontos na carteira por excesso de velocidade e passa a dirigir mais devagar.", "Um aluno estuda para uma prova para evitar uma nota baixa."], correct: 2 },
                ]
            },
            pratica_profissional: {
                title: "Pr√°tica Profissional",
                timeLimit: 60,
                questions: [
                    // DISCURSIVAS
                    { id: "PP_D1", type: "discursiva", text: `Voc√™ √© psic√≥logo(a) em um Centro de Refer√™ncia de Assist√™ncia Social (CRAS) e atende uma fam√≠lia cujo filho adolescente, de 15 anos, apresenta evas√£o escolar e envolvimento com atos infracionais. A m√£e relata dificuldades em impor limites. Descreva sua proposta de interven√ß√£o, considerando: a) a articula√ß√£o com outros servi√ßos da rede (escola, Conselho Tutelar, CREAS); b) uma estrat√©gia de atua√ß√£o junto √† fam√≠lia para fortalecer os v√≠nculos e a fun√ß√£o protetiva.` },
                    { id: "PP_D2", type: "discursiva", text: `Como psic√≥logo(a) hospitalar em uma unidade de oncologia pedi√°trica, voc√™ √© chamado para atender uma crian√ßa de 8 anos em cuidados paliativos e sua fam√≠lia. Os pais demonstram dificuldade em falar sobre a morte com a filha. Descreva sua atua√ß√£o, abordando: a) como voc√™ facilitaria a comunica√ß√£o entre pais e filha sobre o processo de finitude, respeitando o desenvolvimento cognitivo da crian√ßa; b) dois cuidados √©ticos essenciais nesse contexto.` },
                    { id: "PP_D3", type: "discursiva", text: `O setor de RH de uma empresa contrata voc√™ para lidar com um aumento de queixas de estresse e conflitos interpessoais em uma equipe de vendas. O gestor da equipe √© conhecido por ser autorit√°rio e focado apenas em metas. Elabore um plano de interven√ß√£o em Psicologia Organizacional e do Trabalho (POT), detalhando: a) sua estrat√©gia de diagn√≥stico (ex: entrevistas, observa√ß√£o, aplica√ß√£o de question√°rios); b) uma proposta de interven√ß√£o para desenvolver a lideran√ßa e melhorar o clima organizacional.` },
                    // M√öLTIPLA ESCOLHA
                    { id: "PP_M1", type: "multipla_escolha", text: `Um psic√≥logo escolar √© informado por um aluno de 14 anos que ele sofre viol√™ncia f√≠sica em casa. De acordo com o C√≥digo de √âtica Profissional do Psic√≥logo e o ECA, qual a conduta correta?`, options: ["Manter sigilo absoluto, pois o aluno pediu e o v√≠nculo terap√™utico √© priorit√°rio.", "Conversar com os pais e pedir que eles mudem o comportamento, sem tomar outras medidas.", "Notificar imediatamente o Conselho Tutelar, mesmo que isso implique a quebra do sigilo.", "Aconselhar o aluno a fugir de casa para se proteger.", "Ignorar a den√∫ncia, pois a escola n√£o deve se envolver em assuntos familiares."], correct: 2 },
                    { id: "PP_M2", type: "multipla_escolha", text: `Ao elaborar um laudo psicol√≥gico para fins judiciais, o psic√≥logo deve:`, options: ["Usar linguagem subjetiva e jarg√µes t√©cnicos para demonstrar conhecimento.", "Apresentar conclus√µes afirmativas sobre fatos que n√£o p√¥de observar diretamente, como a ocorr√™ncia de um crime.", "Limitar-se a descrever os instrumentos utilizados, sem apresentar uma an√°lise conclusiva.", "Fundamentar sua an√°lise em uma avalia√ß√£o criteriosa, utilizando m√©todos e t√©cnicas reconhecidas, e ser claro, preciso e objetivo.", "Incluir informa√ß√µes sobre a vida √≠ntima do avaliado que n√£o sejam relevantes para a demanda judicial."], correct: 3 },
                    { id: "PP_M3", type: "multipla_escolha", text: `A atua√ß√£o do psic√≥logo em um Centro de Aten√ß√£o Psicossocial (CAPS) √© pautada pela l√≥gica do cuidado em liberdade e da aten√ß√£o psicossocial. Uma pr√°tica condizente com esse modelo √©:`, options: ["Focar exclusivamente na medica√ß√£o e no controle dos sintomas do paciente.", "Realizar interven√ß√µes individuais no consult√≥rio, sem contato com a fam√≠lia ou a comunidade.", "Construir um Projeto Terap√™utico Singular (PTS) em conjunto com o usu√°rio e sua rede de apoio, visando √† reinser√ß√£o social.", "Priorizar a interna√ß√£o em hospitais psiqui√°tricos como principal forma de tratamento.", "Limitar o atendimento aos casos considerados 'cur√°veis'."], correct: 2 },
                    { id: "PP_M4", type: "multipla_escolha", text: `Em um processo de sele√ß√£o de pessoal, o psic√≥logo utiliza um teste de personalidade que n√£o possui parecer favor√°vel no SATEPSI (Sistema de Avalia√ß√£o de Testes Psicol√≥gicos). Essa pr√°tica constitui:`, options: ["Uma decis√£o aut√¥noma e aceit√°vel, se o psic√≥logo julgar o teste adequado.", "Uma falta √©tica, pois √© dever do psic√≥logo utilizar apenas instrumentos validados pelo Conselho Federal de Psicologia.", "Uma pr√°tica recomendada para inovar no processo de sele√ß√£o.", "Um procedimento legal, desde que a empresa autorize por escrito.", "Uma quest√£o de menor import√¢ncia, pois o teste √© apenas uma parte da sele√ß√£o."], correct: 1 },
                    { id: "PP_M5", type: "multipla_escolha", text: `Um psic√≥logo cl√≠nico recebe em seu consult√≥rio um paciente que relata idea√ß√£o suicida com planejamento. Qual √© a conduta priorit√°ria e √©tica a ser tomada?`, options: ["Manter o sigilo absoluto e apenas trabalhar o tema em terapia.", "Contatar a fam√≠lia ou a rede de apoio do paciente para comunicar o risco, mesmo sem o consentimento dele, visando √† prote√ß√£o da vida.", "Encaminhar o paciente para um psiquiatra e encerrar o acompanhamento psicol√≥gico.", "Sugerir uma interna√ß√£o volunt√°ria e n√£o tomar outras provid√™ncias se o paciente recusar.", "Ligar imediatamente para a pol√≠cia e informar a situa√ß√£o."], correct: 1 },
                    { id: "PP_M6", type: "multipla_escolha", text: `A Redu√ß√£o de Danos √© uma estrat√©gia de cuidado voltada para usu√°rios de √°lcool e outras drogas. Seu objetivo principal √©:`, options: ["Exigir a abstin√™ncia total e imediata como √∫nica condi√ß√£o para o tratamento.", "Minimizar as consequ√™ncias negativas do uso de drogas, sem necessariamente exigir a abstin√™ncia, respeitando a autonomia do sujeito.", "Punir o usu√°rio para que ele abandone o v√≠cio.", "Isolar o usu√°rio da sociedade para evitar cont√°gio.", "Oferecer apenas tratamento medicamentoso, desconsiderando os aspectos sociais."], correct: 1 },
                    { id: "PP_M7", type: "multipla_escolha", text: `No contexto da psicologia jur√≠dica, o psic√≥logo que atua como perito deve:`, options: ["Atuar para defender a parte que o contratou, buscando provas a seu favor.", "Manter uma postura imparcial, produzindo um laudo t√©cnico e isento para subsidiar a decis√£o do juiz.", "Realizar psicoterapia com as partes envolvidas no processo.", "Aconselhar o juiz sobre qual deve ser a senten√ßa final.", "Omitir dados da avalia√ß√£o que possam prejudicar a imagem de uma das partes."], correct: 1 },
                    { id: "PP_M8", type: "multipla_escolha", text: `O trabalho do psic√≥logo na Aten√ß√£o Prim√°ria √† Sa√∫de (em uma UBS, por exemplo) deve focar em:`, options: ["Psicoterapia individual de longa dura√ß√£o para casos complexos.", "A√ß√µes de promo√ß√£o de sa√∫de mental e preven√ß√£o de agravos, com foco na comunidade e em grupos.", "Aplica√ß√£o de testes para diagn√≥stico de transtornos psiqui√°tricos graves.", "Atendimento exclusivo de pacientes encaminhados por m√©dicos.", "Realiza√ß√£o de per√≠cias para o INSS."], correct: 1 },
                    { id: "PP_M9", type: "multipla_escolha", text: `Um psic√≥logo √© convidado a participar de um programa de TV para comentar um caso criminal de grande repercuss√£o. Segundo o C√≥digo de √âtica, ele deve:`, options: ["Fazer diagn√≥sticos sobre as pessoas envolvidas com base em informa√ß√µes da m√≠dia.", "Divulgar informa√ß√µes sigilosas de casos que j√° atendeu para exemplificar.", "Promover-se profissionalmente, aproveitando a visibilidade do caso.", "Evitar a espetaculariza√ß√£o e limitar-se a fornecer informa√ß√µes te√≥ricas da psicologia que ajudem a compreender o fen√¥meno, sem rotular ou expor pessoas.", "Recusar sempre, pois o psic√≥logo n√£o pode falar com a imprensa."], correct: 3 },
                    { id: "PP_M10", type: "multipla_escolha", text: `Ao realizar a devolutiva em um processo de psicodiagn√≥stico infantil, o psic√≥logo deve comunicar os resultados:`, options: ["Apenas para a escola, que fez o encaminhamento.", "Apenas para a crian√ßa, em linguagem t√©cnica e complexa.", "Primeiro aos pais/respons√°veis e depois √† crian√ßa, utilizando linguagem acess√≠vel e focando nos potenciais e nas estrat√©gias de ajuda.", "Apenas aos pais, omitindo a informa√ß√£o da crian√ßa para proteg√™-la.", "A todos os envolvidos ao mesmo tempo, incluindo pais, crian√ßa e escola, em uma √∫nica reuni√£o."], correct: 2 },
                    { id: "PP_M11", type: "multipla_escolha", text: `A Matriz de Risco Familiar √© uma ferramenta utilizada na assist√™ncia social para avaliar o grau de vulnerabilidade de uma fam√≠lia. Um psic√≥logo do SUAS (Sistema √önico de Assist√™ncia Social) a utiliza para:`, options: ["Classificar as fam√≠lias como 'boas' ou 'ruins'.", "Decidir quais fam√≠lias devem perder a guarda dos filhos.", "Planejar as a√ß√µes e priorizar o acompanhamento das fam√≠lias em maior situa√ß√£o de risco e viola√ß√£o de direitos.", "Definir o valor do benef√≠cio do Bolsa Fam√≠lia.", "Realizar um diagn√≥stico psiqui√°trico de todos os membros da fam√≠lia."], correct: 2 },
                    { id: "PP_M12", type: "multipla_escolha", text: `Um psicoterapeuta se sente atra√≠do por um(a) paciente e considera iniciar uma rela√ß√£o amorosa. Essa conduta √©:`, options: ["Aceit√°vel, se o sentimento for rec√≠proco e a terapia for encerrada.", "Proibida pelo C√≥digo de √âtica, pois configura aproveitamento da rela√ß√£o de poder e quebra do enquadre terap√™utico.", "Permitida, desde que esperem um m√™s ap√≥s o fim da terapia.", "Uma quest√£o pessoal, que n√£o tem rela√ß√£o com a √©tica profissional.", "Aceit√°vel, se for mantida em segredo."], correct: 1 },
                    { id: "PP_M13", type: "multipla_escolha", text: `A escuta especializada, prevista na Lei n¬∫ 13.431/2017, √© um procedimento de entrevista com crian√ßa ou adolescente v√≠tima ou testemunha de viol√™ncia perante √≥rg√£o da rede de prote√ß√£o. Ela deve ser conduzida por um profissional capacitado com o objetivo de:`, options: ["Produzir prova para o processo judicial, questionando o depoente de forma incisiva.", "Garantir a prote√ß√£o e o cuidado com a crian√ßa/adolescente, evitando a revitimiza√ß√£o.", "Fazer com que a crian√ßa confesse se est√° mentindo.", "Substituir a necessidade de um processo judicial.", "Realizar um processo psicoterap√™utico durante a entrevista."], correct: 1 },
                    { id: "PP_M14", type: "multipla_escolha", text: `Qual das seguintes a√ß√µes caracteriza uma interven√ß√£o em psicologia comunit√°ria?`, options: ["Psicoterapia individual com foco em conflitos intraps√≠quicos.", "Aplica√ß√£o de testes de QI para selecionar os mais aptos da comunidade.", "Desenvolvimento de um grupo de m√£es em uma comunidade para fortalecer v√≠nculos e discutir pr√°ticas parentais, a partir de uma demanda local.", "Treinamento de habilidades sociais para executivos de uma grande empresa.", "Diagn√≥stico e medicaliza√ß√£o de problemas sociais."], correct: 2 },
                    { id: "PP_M15", type: "multipla_escolha", text: `O psic√≥logo do esporte, ao trabalhar com uma equipe de alto rendimento, tem como uma de suas principais fun√ß√µes:`, options: ["Selecionar os atletas com base apenas em testes de personalidade.", "Atuar como t√©cnico, definindo as estrat√©gias de jogo.", "Desenvolver vari√°veis psicol√≥gicas como concentra√ß√£o, controle da ansiedade, motiva√ß√£o e coes√£o de grupo.", "Realizar psicoterapia profunda com os atletas para resolver traumas de inf√¢ncia.", "Garantir que os atletas sigam uma dieta rigorosa."], correct: 2 },
                ]
            },
            prova_completa: {
                title: "Prova Completa",
                timeLimit: 120,
                questions: [] // Ser√° preenchido dinamicamente
            }
        };

        // Combinar quest√µes para prova completa
        examData.prova_completa.questions = [
            ...examData.formacao_geral.questions.slice(0, 8), // Pegando uma amostra
            ...examData.componente_especifico.questions.slice(0, 8),
            ...examData.pratica_profissional.questions.slice(0, 8)
        ];


        // --- ESTADO DO APLICATIVO ---
        let currentExam = null;
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let timeRemaining = 0;
        let timerInterval = null;
        let examStartTime = null;

        // --- ELEMENTOS DOM ---
        const examSelection = document.getElementById('examSelection');
        const quizContainer = document.getElementById('quizContainer');
        const resultsContainer = document.getElementById('resultsContainer');
        const historyContainer = document.getElementById('historyContainer');
        const questionContainer = document.getElementById('questionContainer');
        const examCards = document.querySelectorAll('.exam-card');
        const startButton = document.getElementById('startButton');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const finishButton = document.getElementById('finishButton');
        const timer = document.getElementById('timer');
        const progressFill = document.getElementById('progressFill');
        const questionCounter = document.getElementById('questionCounter');
        const examTitle = document.getElementById('examTitle');

        // --- INICIALIZA√á√ÉO ---
        document.addEventListener('DOMContentLoaded', initializeApp);

        function initializeApp() {
            setupEventListeners();
            document.getElementById('apiKeyInput').value = GEMINI_API_KEY.startsWith("COLE_SUA_CHAVE") ? "" : GEMINI_API_KEY;
            console.log('ENADE-Psi 2025 Simulador com Gemini 2.0 Flash carregado com sucesso!');
        }

        function setupEventListeners() {
            examCards.forEach(card => card.addEventListener('click', () => selectExam(card)));
            startButton.addEventListener('click', startExam);
            
            // Navega√ß√£o Quiz
            prevButton.addEventListener('click', previousQuestion);
            nextButton.addEventListener('click', nextQuestion);
            finishButton.addEventListener('click', finishExam);

            // Bot√µes de A√ß√£o Resultados
            document.getElementById('downloadButton').addEventListener('click', downloadPDF);
            document.getElementById('newExamButton').addEventListener('click', startNewExam);
            document.getElementById('backToHomeButton').addEventListener('click', backToHome);
            
            // Bot√µes Tela Inicial
            document.getElementById('historyButton').addEventListener('click', showHistory);
            document.getElementById('saveApiKeyButton').addEventListener('click', () => {
                const newKey = document.getElementById('apiKeyInput').value;
                const updatedKey = updateAPIKey(newKey);
                if(updatedKey) GEMINI_API_KEY = updatedKey;
            });
            
            // Bot√£o Hist√≥rico
            document.getElementById('backToHomeFromHistory').addEventListener('click', backToHome);
        }

        // --- FUN√á√ïES DE CONTROLE DO EXAME ---

        function selectExam(card) {
            examCards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            const examType = card.dataset.exam;
            currentExam = examData[examType];
            startButton.classList.add('active');
            startButton.textContent = `Iniciar ${currentExam.title}`;
        }

        function startExam() {
            if (!currentExam) return;
            examSelection.style.display = 'none';
            quizContainer.style.display = 'block';
            examTitle.textContent = currentExam.title;
            timeRemaining = currentExam.timeLimit * 60;
            examStartTime = new Date();
            userAnswers = {};
            currentQuestionIndex = 0;
            startTimer();
            renderQuestion();
            updateProgress();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    finishExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // --- RENDERIZA√á√ÉO E NAVEGA√á√ÉO DAS QUEST√ïES ---

        function renderQuestion() {
            const question = currentExam.questions[currentQuestionIndex];
            const isLastQuestion = currentQuestionIndex === currentExam.questions.length - 1;
            questionCounter.textContent = `Quest√£o ${currentQuestionIndex + 1} de ${currentExam.questions.length}`;
            
            let questionHTML = `
                <div class="question-header">
                    <span class="question-number">Quest√£o ${currentQuestionIndex + 1}</span>
                    <span class="question-type">${question.type === 'multipla_escolha' ? 'M√∫ltipla Escolha' : 'Discursiva'}</span>
                    <button class="ai-hint-button" onclick="getAIHint(this)">üí° Pedir Dica da IA</button>
                </div>
                <div class="question-text">${question.text}</div>
                <div id="aiHintBox-${question.id}" class="ai-hint-box" style="display: none;"></div>
            `;

            if (question.type === 'multipla_escolha') {
                questionHTML += '<div class="options-container">';
                question.options.forEach((option, index) => {
                    const letter = String.fromCharCode(65 + index);
                    const isSelected = userAnswers[question.id] === letter;
                    questionHTML += `
                        <div class="option ${isSelected ? 'selected' : ''}" data-option="${letter}">
                            <div class="option-letter">${letter}</div>
                            <div class="option-text">${option}</div>
                        </div>
                    `;
                });
                questionHTML += '</div>';
            } else {
                const savedAnswer = userAnswers[question.id] || '';
                questionHTML += `<textarea class="essay-textarea" placeholder="Digite sua resposta aqui..." data-question="${question.id}">${savedAnswer}</textarea>`;
            }

            questionContainer.innerHTML = questionHTML;
            questionContainer.classList.add('fade-in');

            // Adiciona event listeners para as op√ß√µes ou textarea
            if (question.type === 'multipla_escolha') {
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', () => selectOption(option));
                });
            } else {
                document.querySelector('.essay-textarea').addEventListener('input', (e) => {
                    userAnswers[question.id] = e.target.value;
                });
            }

            // Atualiza bot√µes de navega√ß√£o
            prevButton.disabled = currentQuestionIndex === 0;
            nextButton.style.display = isLastQuestion ? 'none' : 'inline-block';
            finishButton.style.display = isLastQuestion ? 'inline-block' : 'none';
        }
        
        function selectOption(optionElement) {
            const questionId = currentExam.questions[currentQuestionIndex].id;
            const selectedOption = optionElement.dataset.option;
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            optionElement.classList.add('selected');
            userAnswers[questionId] = selectedOption;
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
                updateProgress();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentExam.questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / currentExam.questions.length) * 100;
            progressFill.style.width = `${progress}%`;
        }

        // --- FUN√á√ïES DA API GEMINI ---

        async function getAIHint(button) {
            if (!GEMINI_API_KEY || GEMINI_API_KEY === "COLE_SUA_CHAVE_AQUI") {
                alert("Por favor, configure sua chave da API Gemini na tela inicial.");
                return;
            }

            const question = currentExam.questions[currentQuestionIndex];
            const hintBox = document.getElementById(`aiHintBox-${question.id}`);
            
            button.disabled = true;
            hintBox.style.display = 'block';
            hintBox.innerHTML = '<div class="spinner"></div><p>Gerando dica...</p>';

            const prompt = `Sou um estudante de Psicologia fazendo um simulado para o ENADE. Analise a seguinte quest√£o do simulado: "${question.text.replace(/<[^>]*>/g, '')}". Forne√ßa apenas dicas, caminhos de racioc√≠nio, e contextos te√≥ricos relevantes. N√ÉO entregue a resposta final nem indique qual alternativa est√° correta.`;

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-goog-api-key': GEMINI_API_KEY },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                if (!response.ok) throw new Error(`Erro da API: ${response.status}`);
                
                const data = await response.json();
                const hintText = data.candidates[0].content.parts[0].text;
                hintBox.innerHTML = hintText.replace(/\n/g, '<br>');

            } catch (error) {
                console.error('Erro ao buscar dica da IA:', error);
                hintBox.innerHTML = '<p style="color: var(--error-color);">N√£o foi poss√≠vel obter a dica. Verifique sua chave da API e a conex√£o.</p>';
                button.disabled = false;
            }
        }
        
        async function getGeminiAnalysis(examDataForAnalysis, stats) {
            if (!GEMINI_API_KEY || GEMINI_API_KEY === "COLE_SUA_CHAVE_AQUI") {
                return `<h3 style="color: var(--error-color);">An√°lise Indispon√≠vel</h3><p>A an√°lise detalhada com IA n√£o p√¥de ser gerada pois a chave da API Gemini n√£o foi configurada. Seus resultados b√°sicos foram salvos.</p>`;
            }
            
            const prompt = `Voc√™ √© um tutor especialista em Psicologia para o exame ENADE. Analise o seguinte resultado de um simulado e forne√ßa um feedback construtivo.
            
            **Dados do Simulado:**
            - Tipo de Prova: ${examDataForAnalysis.examType}
            - Tempo Gasto: ${stats.timeSpent} minutos
            - Quest√µes Objetivas: ${stats.correctAnswers} de ${stats.totalMultipleChoice} corretas (${stats.score}% de aproveitamento).
            - Quest√µes Discursivas Respondidas: ${stats.essayQuestions} de ${stats.totalEssayQuestions}.

            **Respostas do Usu√°rio:**
            ${JSON.stringify(examDataForAnalysis.answers, null, 2)}

            **Gabarito e Temas das Quest√µes:**
            ${JSON.stringify(examDataForAnalysis.questions.map(q => ({ id: q.id, type: q.type, text: q.text.substring(0, 50)+'...', correct: q.type === 'multipla_escolha' ? String.fromCharCode(65 + q.correct) : 'N/A' })), null, 2)}

            **Sua Tarefa:**
            1. **Diagn√≥stico Geral:** Comente sobre o desempenho geral, considerando o aproveitamento e o tempo.
            2. **An√°lise de Pontos Fortes e Fracos:** Identifique os temas onde o aluno foi bem e onde precisa melhorar, com base nas respostas corretas e incorretas.
            3. **Avalia√ß√£o das Respostas Discursivas:** Se houver respostas discursivas, avalie a qualidade, a profundidade e a clareza. Ofere√ßa sugest√µes espec√≠ficas de melhoria. Se n√£o respondeu, aponte a import√¢ncia de praticar.
            4. **Plano de Estudo Sugerido:** Crie um plano de estudo simples e direcionado para as √°reas de maior dificuldade.

            **Formato da Resposta:**
            Use HTML para formatar sua resposta. Utilize t√≠tulos com <h3>, par√°grafos com <p>, listas com <ul> e <li>, e use <strong> para destacar pontos importantes. Mantenha um tom encorajador e educativo.`;

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-goog-api-key': GEMINI_API_KEY },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                if (!response.ok) throw new Error(`Erro da API: ${response.status}`);
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error("Erro na an√°lise do Gemini:", error);
                return `<h3 style="color: var(--error-color);">Erro na An√°lise</h3><p>Ocorreu um erro ao tentar gerar a an√°lise detalhada. Verifique sua chave de API e tente novamente. Seus resultados foram salvos.</p>`;
            }
        }
        
        // --- FINALIZA√á√ÉO E RESULTADOS ---

        function finishExam() {
            clearInterval(timerInterval);
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
            processResults();
        }

        async function processResults() {
            const loadingMessage = document.getElementById('loadingMessage');
            const resultsContent = document.getElementById('resultsContent');
            loadingMessage.style.display = 'block';
            resultsContent.style.display = 'none';

            const stats = calculateBasicStats();
            saveExamResult(stats);
            
            const examDataForAnalysis = {
                examType: currentExam.title,
                questions: currentExam.questions,
                answers: userAnswers,
            };
            
            const aiAnalysis = await getGeminiAnalysis(examDataForAnalysis, stats);
            displayResults(stats, aiAnalysis);
        }

        function calculateBasicStats() {
            let correctAnswers = 0;
            let totalMultipleChoice = 0;
            let essayQuestions = 0;
            let totalEssayQuestions = 0;

            currentExam.questions.forEach(q => {
                if (q.type === 'multipla_escolha') {
                    totalMultipleChoice++;
                    const userAnswer = userAnswers[q.id];
                    const correctAnswer = String.fromCharCode(65 + q.correct);
                    if (userAnswer === correctAnswer) correctAnswers++;
                } else {
                    totalEssayQuestions++;
                    if (userAnswers[q.id] && userAnswers[q.id].trim() !== '') {
                        essayQuestions++;
                    }
                }
            });

            const score = totalMultipleChoice > 0 ? (correctAnswers / totalMultipleChoice) * 100 : 0;
            const timeSpent = Math.round((new Date() - examStartTime) / 1000 / 60);

            return { score: Math.round(score), correctAnswers, totalMultipleChoice, essayQuestions, totalEssayQuestions, timeSpent };
        }

        function displayResults(stats, aiAnalysis) {
            document.getElementById('loadingMessage').style.display = 'none';
            const resultsContent = document.getElementById('resultsContent');
            resultsContent.style.display = 'block';

            resultsContent.innerHTML = `
                <div class="score-summary">
                    <div class="score-card">
                        <div class="score-value">${stats.score}%</div>
                        <div class="score-label">Aproveitamento</div>
                    </div>
                    <div class="score-card">
                        <div class="score-value">${stats.correctAnswers}/${stats.totalMultipleChoice}</div>
                        <div class="score-label">Acertos</div>
                    </div>
                    <div class="score-card">
                        <div class="score-value">${stats.essayQuestions}/${stats.totalEssayQuestions}</div>
                        <div class="score-label">Discursivas</div>
                    </div>
                    <div class="score-card">
                        <div class="score-value">${stats.timeSpent}min</div>
                        <div class="score-label">Tempo Gasto</div>
                    </div>
                </div>
                ${aiAnalysis}
            `;
        }
        
        // --- FUN√á√ïES DE HIST√ìRICO E A√á√ïES ---

        function saveExamResult(stats) {
            const result = {
                id: Date.now(),
                examType: currentExam.title,
                date: new Date().toLocaleString('pt-BR'),
                score: stats.score,
                correct: `${stats.correctAnswers}/${stats.totalMultipleChoice}`,
                timeSpent: stats.timeSpent
            };
            const history = JSON.parse(localStorage.getItem('enade_history') || '[]');
            history.unshift(result); // Adiciona no in√≠cio
            localStorage.setItem('enade_history', JSON.stringify(history.slice(0, 20))); // Limita a 20 entradas
        }

        function showHistory() {
            const history = JSON.parse(localStorage.getItem('enade_history') || '[]');
            const historyContent = document.getElementById('historyContent');
            
            if (history.length === 0) {
                historyContent.innerHTML = '<p>Nenhum simulado realizado ainda.</p>';
            } else {
                let tableHTML = `
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Prova</th>
                                <th>Aproveitamento</th>
                                <th>Acertos</th>
                                <th>Tempo</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                history.forEach(r => {
                    tableHTML += `
                        <tr>
                            <td>${r.date}</td>
                            <td>${r.examType}</td>
                            <td><strong>${r.score}%</strong></td>
                            <td>${r.correct}</td>
                            <td>${r.timeSpent} min</td>
                        </tr>
                    `;
                });
                tableHTML += '</tbody></table>';
                historyContent.innerHTML = tableHTML;
            }
            
            examSelection.style.display = 'none';
            historyContainer.style.display = 'block';
        }

        function downloadPDF() {
            alert("Fun√ß√£o de download de PDF em desenvolvimento.");
        }

        function startNewExam() {
            currentExam = null;
            clearInterval(timerInterval);
            resultsContainer.style.display = 'none';
            examSelection.style.display = 'block';
            examCards.forEach(card => card.classList.remove('selected'));
            startButton.classList.remove('active');
            startButton.textContent = 'Iniciar Simulado';
        }

        function backToHome() {
            startNewExam();
            historyContainer.style.display = 'none';
        }
        
        // --- Prevenir fechamento acidental ---
        window.addEventListener('beforeunload', function(e) {
            if (quizContainer.style.display === 'block') {
                e.preventDefault();
                e.returnValue = 'Voc√™ tem certeza que deseja sair? Seu progresso ser√° perdido.';
                return 'Voc√™ tem certeza que deseja sair? Seu progresso ser√° perdido.';
            }
        });
    </script>
</body>
</html>
